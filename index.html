<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Adam Łuczak, Ph.D. - Portfolio</title>
    <meta name="description" content="Adam Łuczak, Ph.D.: Expert in Embedded Systems, iOS/macOS, Neural Networks, PCB Design, and 3D Modeling. Skilled with ChatGPT, Midjourney, Leonardo.ai.">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="./styles/fonts.css">
    <link rel="stylesheet" href="./styles/normalize.css">
    <link rel="stylesheet" href="style.css">    

    <link rel="icon" type="image/png" href="/images/favicon.png">
</head>
<body>
    <main>
        <aside class="sidebar" data-sidebar>
            <div class="container-fluid">
                <div class="row flex-nowrap">
                    <div id="left-column">
                    </div>
                </div>
            </div>
        </aside>

        <div class="main-content">
            <div id="main-column" class="col bg-secondary">
            </div>
        </div>

    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/showdown@1.9.1/dist/showdown.min.js"></script>

    <script>


    async function fetchMdContent(url) 
    {
        const response = await fetch(url);
        if (!response.ok) 
        {
            throw new Error(`HTTP error! status: ${response.status}`);
        }
        return await response.text();
    }

    function processCardContainer(container) 
    {
        const images = container.querySelectorAll('img');
        images.forEach(img => 
        {
            img.classList.add(img.alt);
        });

        const links = container.querySelectorAll('a');
        links.forEach(link => 
        {
            if (link.href.endsWith('.md')) 
            {
                console.info('Found markdown link', link.href)
                const styleName = link.textContent;
                
                link.addEventListener('click', function(event) 
                {
                    event.preventDefault();
                    fetchMdContent(link.href)
                        .then(mdContent => 
                        {
                            const converter = new showdown.Converter();
                            const html      = converter.makeHtml(mdContent);

                            let     cardContainer   = document.createElement('div');
                            cardContainer.className = 'markdown-1 markdown-dark-1';
                            cardContainer.innerHTML = html;

                            ref = document.getElementById("main-column");
                            if (ref) ref.appendChild(cardContainer);
                        });
                });
            }
        });
    }

    function loadHtmlContent(path, elementId) 
    {
        fetch(path)
            .then(response => response.text())
            .then(data => 
            {
                const container = document.getElementById(elementId);
                const cardContainer = document.createElement('div');
                cardContainer.innerHTML = data;
                container.appendChild(cardContainer);
            })
            .catch(err => console.error('Failed to load page content', err));
    }

    function loadMarkdownContent(path, elementId, className) 
    {
        const   container       = document.getElementById(elementId);
        let     cardContainer   = document.createElement('div');

                container.appendChild(cardContainer);

        fetch(path)
            .then(response => response.text())
            .then(markdown => {
                const converter = new showdown.Converter();
                const html      = converter.makeHtml(markdown);
                cardContainer.className = className[0];
                for (let i = 1; i < className.length; i++) {
                    cardContainer.classList.add(className[i]);
                }
                cardContainer.innerHTML = html;

                processCardContainer(cardContainer);
            })
            .catch(err => console.error('Failed to load markdown content', err));
    }

    loadMarkdownContent('content/portfolio/mydata.md', 'left-column', ['markdown-1','markdown-dark-1']);
    loadMarkdownContent('content/portfolio/currently_employed.md', 'left-column', ['markdown-1','markdown-dark-1']);
    loadMarkdownContent('content/portfolio/skils.md', 'left-column', ['markdown-1','markdown-dark-1']);
    loadMarkdownContent('content/portfolio/research.md', 'left-column', ['markdown-1','markdown-dark-1']);
    loadMarkdownContent('content/portfolio/education.md', 'left-column', ['markdown-1','markdown-dark-1']);

    </script>
</body>
</html>
